<!DOCTYPE html>
<html lang="it-IT">

<head>
  <%- include("../partials/header.ejs") %>
</head>

<body>
  <div class="container-fluid position-relative d-flex p-0">
    <!-- Spinner Start -->
    <%- include("../partials/spinner.ejs") %>
      <!-- Spinner End -->


      <!-- Sidebar Start -->
      <%- include("../partials/sidebar.ejs") %>
        <!-- Sidebar End -->


        <!-- Content Start -->
        <div class="content">
          <!-- Navbar Start -->
          <%- include("../partials/navbar.ejs") %>
            <!-- Navbar End -->


            <!-- Form Start -->
            <div class="container-fluid pt-4 px-4">
              <div class="row g-4">

                <!-- File input Start -->
                <div class="col-sm-12 col-xl-6">
                  <div class="bg-secondary rounded h-100 p-4">

                    <h6 class="mb-4">File Input</h6>
                    <div class="mb-3">
                      <!--<label for="formFile" class="form-label">Carica i link target</label>-->
                      <input class="form-control bg-dark" type="file" id="urlFile">
                    </div>

                    <h6 class="mb-4">Text Input</h6>
                    <div class="form-floating">
                      <textarea class="form-control" placeholder="Leave a comment here" id="urlTextarea"
                        style="height: 150px;"></textarea>
                      <!--<label for="floatingTextarea">Inserisci i link target</label>-->
                    </div>

                  </div>
                </div>
                <!-- File input End -->


                <!-- Preview Start -->
                <div class="col-sm-12 col-xl-6">
                  <div class="bg-secondary rounded h-100 p-4">
                    <h6 class="mb-4">Preview</h6>
                    <div id="preview" style="overflow: auto;"></div>
                    <button type="button" class="btn btn-success m-2">SCAN</button>
                  </div>
                </div>
                <!-- Preview End -->

                <script>
                  document.getElementById("urlFile").addEventListener("change", (e) => {
                    var file = e.target.files[0]
                    if (file) {
                      var reader = new FileReader()
                      reader.readAsText(file, "UTF-8")
                      reader.onload = function (evt) {
                        var lines = evt.target.result.split('\n');
                        Array.prototype.slice.call(lines).forEach(element => {
                          document.getElementById("preview").innerText += element + '\n'
                          document.getElementById("urlTextarea").value += element + '\n'
                        })
                      }
                      reader.onerror = function (evt) {
                        document.getElementById("preview").textContent = "error reading file"
                        document.getElementById("urlTextarea").value = "error reading file"
                      }
                    }
                  })
                  document.getElementById("urlTextarea").addEventListener("input", (e) => {
                    document.getElementById("preview").innerText = e.target.value
                  })
                </script>

              </div>
            </div>
            <!-- Form End -->

            <!-- Footer Start -->
            <%- include("../partials/footer.ejs") %>
              <!-- Footer End -->
        </div>
        <!-- Content End -->


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
  </div>

  <!-- JavaScript Libraries -->
  <%- include("../partials/jslib.ejs") %>

    <!-- Template Javascript -->
    <%- include("../partials/template.ejs") %>
</body>

</html>